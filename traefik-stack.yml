--- 
services: 
  traefik: 
    command: "--docker --docker.swarmmode --docker.watch --docker.exposedbydefault=false --api --logLevel=INFO --accessLog --accessLog.filePath=/etc/traefik/logs/access.log --accessLog.format=json --traefikLog --traefikLog.filePath=/etc/traefik/logs/traefik.log --traefikLog.format=json --acme --acme.email=${EMAIL} --acme.storage=\"/etc/traefik/acme.json\" --acme.entrypoint=https --acme.tlsChallenge --acme.onhostrule=true --acme.acmelogging=true"
    deploy: 
      labels: 
        - "traefik.frontend.rule=Host:traefik.rlab.local"
        - traefik.enable=true
        - traefik.port=8080
        - traefik.docker.network=proxy-net
      mode: global
      placement: 
        constraints: 
          - "node.role == manager"
    image: traefik
    networks: 
      - traefik-proxy-network
    ports: 
      - "80:80"
      - "443:443"
    volumes: 
      - "/var/run/docker.sock:/var/run/docker.sock"
      - "./traefik:/etc/traefik"
version: "3.7"
